<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>mousey</title>
  <!-- Inter font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    /* === styles (trimmed for brevity, keep your originals) === */
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: #0e0e0e;
      color: #fff;
      overflow-x: hidden;
    }
    .promo {
      position: fixed;
      top: 15px;
      right: 15px;
      display: flex;
      gap: 12px;
      z-index: 10;
    }
    .promo img { width: 32px; height: 32px; cursor: pointer; }
    .image-placeholder { display:flex; justify-content:center; margin-top:80px; }
    .image-placeholder img { max-width:400px; transition: opacity .5s ease; }
    .image-placeholder img.fadeout { opacity:0; }
    .drawer { position:fixed; bottom:0; left:0; right:0; background:#111; transform:translateY(85%); transition:.3s ease; border-top:2px solid #444; }
    .drawer.open { transform:translateY(0); }
    .handle { text-align:center; cursor:pointer; padding:8px; background:#222; }
    .songcard { padding:10px; }
    .songtop { display:flex; gap:10px; }
    .cover img { width:64px; height:64px; object-fit:cover; }
    .controls { margin-top:5px; display:flex; align-items:center; gap:6px; }
    .btn { background:#333; border:none; color:#fff; cursor:pointer; padding:4px 8px; }
    .prog { height:4px; background:#333; cursor:pointer; }
    .fill { height:100%; width:0%; background:#f66; }
    footer { text-align:center; font-size:12px; color:#aaa; padding:10px; }
  </style>
</head>
<body>
  <!-- Aurora blobs (if you had them, keep here) -->

  <div class="image-placeholder">
    <img id="mouse" src="assets/mouse.webp" alt="Ironmouse">
  </div>

  <!-- Drawer -->
  <div class="drawer" id="drawer">
    <div class="songcard" id="songcard">
      <div class="songtop">
        <div class="cover"><img id="coverImg" src="assets/cover.jpg" alt="cover"></div>
        <div class="songmeta">
          <div><strong id="songTitle">1-800</strong></div>
          <div class="by" id="songArtist">bbno$, Ironmouse</div>
          <div class="controls">
            <button id="toggle" class="btn">‚ñ∂</button>
            <button id="mute" class="btn">üîä</button>
            <select id="songSelect">
              <option value="0">1-800</option>
              <option value="1">Music Box of Fate</option>
              <option value="2">Cry For Me (WA WA WA)</option>
            </select>
          </div>
        </div>
      </div>
      <div class="prog" id="prog"><div class="fill" id="progFill"></div></div>
      <div class="time"><span id="tCur">0:00</span><span id="tTot">0:00</span></div>
    </div>
    <div class="handle" id="handle"><span>‚ùØ</span></div>
  </div>
  
  <!-- Promo deck -->
  <div class="promo">
    <a href="YOURLINKHERE" target="_blank" title="immune deficiency foundation"><img src="assets/tilt.png" alt="Tiltify"></a>
    <a href="YOURLINKHERE" target="_blank" title="YouTube"><img src="assets/yt.png" alt="YouTube"></a>
    <a href="YOURLINKHERE" target="_blank" title="Twitch"><img src="assets/tw.png" alt="Twitch"></a>
  </div>

  <footer>
    ¬© All rights reserved ‚Äî made with ‚ô• by ren
  </footer>

  <audio id="bgm" loop autoplay muted playsinline preload="auto"></audio>

  <script>
    const audio = document.getElementById('bgm');
    if (location.protocol !== 'file:') audio.crossOrigin = 'anonymous';

    let unmuted = false;
    function ensurePlaying(){
      if (!unmuted) { audio.muted = false; audio.volume = 0.7; unmuted = true; }
      audio.play().catch(()=>{});
    }
    window.addEventListener('pointerdown', ()=> ensurePlaying(), { once:true });

    // rotating mouse images
    const pics=["assets/mouse.webp","assets/mouse2.webp","assets/mouse3.webp"];
    pics.forEach(src=>{const i=new Image(); i.src=src;});
    const imgEl=document.getElementById('mouse'); let current=0;
    function nextIndex(){ let n; do{ n=Math.floor(Math.random()*pics.length);}while(n===current&&pics.length>1); current=n; return n; }
    setInterval(()=>{ imgEl.classList.add('fadeout'); setTimeout(()=>{ imgEl.src=pics[nextIndex()]; imgEl.classList.remove('fadeout'); },500); },5000);

    // drawer toggle
    const drawer=document.getElementById('drawer'), handle=document.getElementById('handle');
    function setOpen(open){ drawer.classList.toggle('open',open); localStorage.setItem('songDrawerOpen', open?'1':'0'); }
    setOpen(localStorage.getItem('songDrawerOpen')==='1');
    handle.addEventListener('click',()=> setOpen(!drawer.classList.contains('open')));

    // playlist
    const toggleBtn=document.getElementById('toggle');
    const muteBtn=document.getElementById('mute');
    const songSelect=document.getElementById('songSelect');
    const coverImg=document.getElementById('coverImg');
    const songTitle=document.getElementById('songTitle');
    const songArtist=document.getElementById('songArtist');
    const prog=document.getElementById('prog'), progFill=document.getElementById('progFill');
    const tCur=document.getElementById('tCur'), tTot=document.getElementById('tTot');

    const songs=[
      { src:"https://cdn.jsdelivr.net/gh/rrrreii/mouseyy@main/songs/1800.mp3", cover:"assets/cover.jpg",  title:"1-800",                 artist:"bbno$, Ironmouse",                         bpm:132 },
      { src:"https://cdn.jsdelivr.net/gh/rrrreii/mouseyy@main/songs/mbof.mp3", cover:"assets/cover2.jpg", title:"Music Box of Fate",     artist:"StarlightDaryl, Ironmouse, WUNDER RIKU",  bpm:116 },
      { src:"https://cdn.jsdelivr.net/gh/rrrreii/mouseyy@main/songs/c4m.mp3",  cover:"assets/cover3.jpg", title:"Cry For Me (WA WA WA)", artist:"Ironmouse, shirobeats, HalaCG, Bubi",      bpm:124 }
    ];
    let currentIndex=0;

    function loadSong(i){
      currentIndex=i;
      const s=songs[i];
      audio.src=s.src;
      coverImg.src=s.cover;
      songTitle.textContent=s.title;
      songArtist.textContent=s.artist;
      audio.load();
      if(unmuted) audio.play().catch(()=>{});
      progFill.style.width='0%'; tCur.textContent='0:00'; tTot.textContent='0:00';
      songSelect.value = String(i);
    }
    songSelect.addEventListener('change',()=> loadSong(Number(songSelect.value)));

    toggleBtn.addEventListener('click',()=> audio.paused? ensurePlaying():audio.pause());
    muteBtn.addEventListener('click',()=>{ audio.muted=!audio.muted; unmuted=!audio.muted; muteBtn.textContent=audio.muted?'üîá':'üîä'; if(!audio.paused) audio.play().catch(()=>{}); });
    audio.addEventListener('play',()=> toggleBtn.textContent='‚è∏');
    audio.addEventListener('pause',()=> toggleBtn.textContent='‚ñ∂');

    function fmt(t){ if(!isFinite(t)) return '0:00'; const m=Math.floor(t/60), s=Math.floor(t%60).toString().padStart(2,'0'); return `${m}:${s}`; }
    let raf;
    function progLoop(){ if(audio.duration){ progFill.style.width=(audio.currentTime/audio.duration)*100+'%'; tCur.textContent=fmt(audio.currentTime); tTot.textContent=fmt(audio.duration); } raf=requestAnimationFrame(progLoop); }
    audio.addEventListener('play',()=>{ cancelAnimationFrame(raf); raf=requestAnimationFrame(progLoop); });
    audio.addEventListener('pause',()=> cancelAnimationFrame(raf));
    audio.addEventListener('ended',()=> cancelAnimationFrame(raf));
    prog.addEventListener('click',(e)=>{ const r=prog.getBoundingClientRect(); const x=(e.clientX-r.left)/r.width; if(audio.duration) audio.currentTime=x*audio.duration; ensurePlaying(); });

    // init first track
    loadSong(0);
  </script>
</body>
</html>
